document.addEventListener('DOMContentLoaded', () => { const popup = document.getElementById('consultation-popup'); const closeBtn = document.getElementById('popup-close-btn'); const popupForm = document.getElementById('consultation-form'); const statusP = document.getElementById('popup-status'); const serviceInput = document.getElementById('popup-service'); const registerButtons = document.querySelectorAll('.register_home2,.register_service'); registerButtons.forEach(button => { button.addEventListener('click', (e) => { e.preventDefault(); const service = button.getAttribute('data-service'); serviceInput.value = service ? service.replace(/<br \/>/g, ' ') : 'Tư vấn chung'; popup.style.display = 'flex'; statusP.textContent = ''; }); }); if (closeBtn) { closeBtn.addEventListener('click', () => { popup.style.display = 'none'; }); } window.addEventListener('click', (e) => { if (e.target === popup) popup.style.display = 'none'; }); if (popupForm) { popupForm.addEventListener('submit', async (e) => { e.preventDefault(); const name = document.getElementById('popup-name').value.trim(); const phone = document.getElementById('popup-phone').value.trim(); const email = document.getElementById('popup-email').value.trim(); if (!name || !phone || !email) { statusP.textContent = 'Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ cÃ¡c trÆ°á»ng báº¯t buá»™c.'; statusP.style.color = 'red'; return; } statusP.textContent = 'Đang gửi...'; statusP.style.color = '#333'; const formData = { name, phone, email, service: serviceInput.value }; sendFormData(formData, statusP, popupForm); }); } const mainForm = document.querySelector('form.wpcf7-form'); if (mainForm) { const responseOutput = mainForm.querySelector('.wpcf7-response-output'); mainForm.addEventListener('submit', async (e) => { e.preventDefault(); const name = mainForm.querySelector('[name="your-name"]').value.trim(); const phone = mainForm.querySelector('[name="your-tel"]').value.trim(); const email = mainForm.querySelector('[name="your-email"]').value.trim(); const service = mainForm.querySelector('[name="menu-course"]').value; if (!name || !phone || !email || !service) { responseOutput.textContent = 'Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ cÃ¡c trÆ°á»ng báº¯t buá»™c.'; responseOutput.style.color = 'red'; responseOutput.setAttribute('aria-hidden', 'false'); return; } responseOutput.textContent = 'Đang gửi...'; responseOutput.style.color = '#333'; responseOutput.setAttribute('aria-hidden', 'false'); const formData = { name, phone, email, service, mst: mainForm.querySelector('[name="your-mst"]').value.trim(), }; sendFormData(formData, responseOutput, mainForm); }); } async function sendFormData(data, statusElement, formElement) { try { const csrfToken = formElement.querySelector('input[name="_csrf"]').value; data._csrf = csrfToken; const response = await fetch('/send-email', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data), }); const result = await response.json(); if (result.success) { statusElement.textContent = result.message; statusElement.style.color = 'green'; if (formElement) formElement.reset(); } else { statusElement.textContent = result.message; statusElement.style.color = 'red'; } } catch (error) { statusElement.textContent = 'Lá»—i káº¿t ná»‘i. Vui lÃ²ng thá»­ láº¡i.'; statusElement.style.color = 'red'; } } const scrollTopBtn = document.getElementById("scrollTopBtn"); if (scrollTopBtn) { window.onscroll = function () { if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) { scrollTopBtn.style.display = "block"; } else { scrollTopBtn.style.display = "none"; } }; scrollTopBtn.addEventListener("click", () => { window.scrollTo({ top: 0, behavior: "smooth" }); }); } });
document.addEventListener("scroll", function () {
    const header = document.querySelector(".elegant-header");
    if (window.scrollY > 50) header.classList.add("scrolled");
    else header.classList.remove("scrolled");
});